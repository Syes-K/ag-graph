<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../src/ag-graph.css">
    <script src="https://cdn.bootcss.com/d3/4.11.0/d3.js"></script>
    <script src="../src/ag-graph.js"></script>
    <style id="customer-style">
        .btn-group {
            text-align: center;
            margin-top: 10px;
        }

        .btn-group button {
            padding: 6px;
            border-radius: 3px;
            outline: none;
        }

        #graph-container {
            margin: 0 auto;
            width: 100%;
            height: 600px;
        }

        svg {
            background-color: #70a190
        }

        .ag-graph-line.hot polyline {
            stroke: #d4151C;
        }
    </style>
</head>

<body>
    <div>
        <div id="graph-container"></div>
        <div class="btn-group">
            <button onclick="addLine()">add line</button>
            <button onclick="deleteLine()">delete line</button>
            <button onclick="deleteNode()">delete node</button>
        </div>
    </div>
    <script>
        var agGraph = new AgGraph({ container: "#graph-container" });
        agGraph.showPoint();
        // agGraph.on("graph.node.add", function () {
        //     console.log("graph.node.add");
        // })
        // agGraph.on("view.viewBox.move", function () {
        //     console.log("view.viewBox.move");
        // })
        var node1 = agGraph.addNode({ id: "n1", x: 0, y: 0, size: 40, image: "./images/plus.jpg", text: "plus" });
        var node2 = agGraph.addNode({ id: "n2", x: -50, y: 100, size: 40, image: "./images/plus.jpg", badge: "99" });
        var node3 = agGraph.addNode({ id: "n3", x: -150, y: -100, size: 40, image: "./images/plus.jpg" });
        var node4 = agGraph.addNode({ id: "n4", x: 100, y: 0, size: 50, image: "./images/message.jpg" });
        var line1 = agGraph.addLine({ id: "l1", source: "n2", target: "n3", animate: true });
        var line2 = agGraph.addLine({ id: "l2", source: "n2", target: "n1", class: ["hot"], animate: true });
        function addLine() {
            var selectedNodes = agGraph.selection.nodes();
            var selectedNodesLength = selectedNodes.length;
            if (selectedNodesLength < 2)
                return;
            var line = agGraph.addLine({
                id: "l" + Math.random(),
                source: agGraph.selection.nodes()[selectedNodesLength - 2].id,
                target: agGraph.selection.nodes()[selectedNodesLength - 1].id,
                animate: true
            });
        }
        function deleteLine() {
            agGraph.selection.lines().forEach(function (line) {
                line.delete();
            });
        }
        function deleteNode() {
            agGraph.selection.nodes().forEach(function (node) {
                node.delete();
            });
        }
    </script>
</body>

</html>