!function(t,e,n){var i="function"==typeof n.define,o=n.module&&"function"!=typeof n.module&&n.module.exports;i?define(e,n):o?module.exports=e(n):n.AgGraph=e(n)}(0,function(t){function e(t,e){var n;return function(){var i=this,o=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(i,o)},e)}}function n(t,e,n,i){t[_+e]=n,Object.defineProperty(t,e,{get:function(){return t[_+e]},set:function(n){t[_+e];t[_+e]=n,i.apply(t)}})}function i(t,e){var n,i=t.indexOf(e);return i>=0&&(n=t.splice(i,1)),n}function o(t){var e=0;return t.forEach(function(n,i){i&&(e+=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}(n,t[i-1]))}),e}function r(t,e){var n=t.x,i=t.y,o=e.x,r=e.y,s=Math.abs(n-o),a=Math.abs(i-r),h=a/Math.sqrt(Math.pow(s,2)+Math.pow(a,2)),d=Math.asin(h),c=180/(Math.PI/d);return o>n&&r>i&&(c=c),o==n&&r>i&&(c=90),o>n&&r==i&&(c=0),o<n&&r>i&&(c=180-c),o<n&&r==i&&(c=180),o<n&&r<i&&(c=180+c),o==n&&r<i&&(c=270),o>n&&r<i&&(c=360-c),o==n&&r==i&&(c=0),360-c}function s(e,n,i){var o,s=d3.select(t.document.body).append("svg").style("position","fixed").style("z-index","-10000").style("top",-1e3).style("opacity",0),a=s.append("path").attr("d",i(e)),h=a.node(),d=h.getTotalLength(),c=h.getPointAtLength(n-3),p=h.getPointAtLength(n),l=h.getPointAtLength(n+3);return o=n+3<d?r({x:p.x,y:-p.y},{x:l.x,y:-l.y}):r({x:c.x,y:-c.y},{x:p.x,y:-p.y}),s.remove(),a.remove(),{x:p.x,y:-p.y,angel:o}}function a(t){var e=this;e.agGraph=t;var i=t.$svg.node().getBoundingClientRect();e.lastScale=1,n(e,"viewBox",[-i.width/2,-i.height/2,i.width,i.height],e._setViewBox),n(e,"scale",1,e._setScale);var o=d3.drag().on("start",function(){var t=d3.event.x,n=d3.event.y;x.offset={x:e.viewBox[0]+t/e.scale,y:e.viewBox[1]+n/e.scale},this._moved=!1}).on("drag",function(){var t=d3.event.x,n=d3.event.y,i=x.offset.x-t/e.scale,o=x.offset.y-n/e.scale;e.viewBox=[i,o,e.viewBox[2],e.viewBox[3]],this._moved=!0}).on("end",function(){this._moved&&t._emit("view.move",e),this._moved=!1});o.clickDistance(5),e.agGraph.$svg.call(o).on("click",function(){t.selection.clearNodes(),t.selection.clearLines(),t.selection.clearPoints();var n={x:d3.event.x,y:d3.event.y},i=e.agGraph._container.offsetParent.getBoundingClientRect(),o={x:n.x-i.x,y:n.y-i.y};t._emit("view.click",e,o,n)}).on("contextmenu",function(){d3.event.stopPropagation(),d3.event.preventDefault();var n={x:d3.event.x,y:d3.event.y},i=e.agGraph._container.offsetParent.getBoundingClientRect(),o={x:n.x-i.x,y:n.y-i.y};t._emit("view.rightClick",e,o,n)})}function h(t){this.agGraph=t,this._nodes=[],this._lines=[],this._points=[]}function d(t,i){t=Object.assign({x:0,y:0,size:f,image:"",text:"",badge:"",selected:!1,lines:[],anchorPoints:[]},t);var o=this;o.agGraph=i;var r=["x","y","size","text","image","badge","selected"];o._renderDebounce=e(o._render,y);for(var s in t)r.indexOf(s)<0?o[s]=t[s]:n(o,s,t[s],o._renderDebounce);var a=d3.drag().on("start",function(){o._dragNodeStart()}).on("drag",function(){o._dragNodeMove()}).on("end",function(){o._dragNodeEnd()});a.clickDistance(5),o.$node=i._$nodeGroup.append("g").attr("node-id",o.id).classed("ag-graph-node",!0),o.$node.append("image").classed("ag-graph-node-image",!0),o.$node.call(a).on("click",function(){d3.event.shiftKey?i.selection.toggleNode(o):(i.selection.removeNode(i.selection.nodes()),i.selection.addNode(o)),d3.event.stopPropagation();var t=o.agGraph._container.offsetParent.getBoundingClientRect(),e={x:d3.event.x-t.x,y:d3.event.y-t.y};i._emit("node.click",o,e)}).on("contextmenu",function(){d3.event.stopPropagation(),d3.event.preventDefault();var t=o.agGraph._container.offsetParent.getBoundingClientRect(),e={x:d3.event.x-t.x,y:d3.event.y-t.y};i._emit("node.rightClick",o,e)})}function c(t,i){t=Object.assign({animate:!1,class:[],selected:!1,text:"",points:[],pointsData:[],lineType:v},t);var o=this;o.agGraph=i;var r=["class","text","selected","lineType"];o._renderDebounce=e(o._render,y);for(var s in t)r.indexOf(s)<0?o[s]=t[s]:n(o,s,t[s],o._renderDebounce);if(o.sourceNode=i.getNode(o.source),o.targetNode=i.getNode(o.target),!o.sourceNode)throw new Error("无效的 source node id: '"+o.source+"'");if(!o.targetNode)throw new Error("无效的 target node id: '"+o.target+"'");o.sourceNode.lines.push(o),o.targetNode.lines.push(o),o.pointsData.length||(o.pointsData=o._getAutoPoints()),o.$line=i._$lineGroup.append("g").attr("line-id",o.id).on("click",function(){d3.event.shiftKey?i.selection.toggleLine(o):(i.selection.removeLine(i.selection.lines()),i.selection.addLine(o)),d3.event.stopPropagation();var t=o.agGraph._container.offsetParent.getBoundingClientRect(),e={x:d3.event.x-t.x,y:d3.event.y-t.y};i._emit("line.click",o,e)}).on("dblclick",function(){var t=o.agGraph.view._transferToViewPosition(d3.event);o._addPoint(t)}).on("contextmenu",function(){d3.event.stopPropagation(),d3.event.preventDefault();var t=o.agGraph._container.offsetParent.getBoundingClientRect(),e={x:d3.event.x-t.x,y:d3.event.y-t.y};i._emit("line.rightClick",o,e)}),o.pointsData.forEach(function(t){o.points.push(new p(t,o))})}function p(t,i){var o=this;o.pointData=t,t=Object.assign({x:0,y:0,selected:!1,anchorNode:null},t),o.line=i;var r=o.line.pointsData.indexOf(o.pointData);0===r&&(o.line.sourceNode.anchorPoints.push(o),t.anchorNode=o.line.sourceNode),r===o.line.pointsData.length-1&&(o.line.targetNode.anchorPoints.push(o),t.anchorNode=o.line.targetNode);var s=["x","y","selected"];o._renderDebounce=e(o._render,y);for(var a in t)s.indexOf(a)<0?o[a]=t[a]:n(o,a,t[a],o._renderDebounce);o.$point=i.agGraph._$pointGroup.append("circle").classed("ag-graph-point",!0).attr("cx",o.x).attr("cy",-o.y).attr("r",u);var h=d3.drag().on("start",function(){o._dragPointStart()}).on("drag",function(){o._dragPointMove()});h.clickDistance(5),o.$point.call(h).on("click",function(){d3.event.shiftKey?o.line.agGraph.selection.togglePoint(o):(o.line.agGraph.selection.removePoint(o.line.agGraph.selection.points()),o.line.agGraph.selection.addPoint(o)),d3.event.stopPropagation(),o.line.agGraph._emit("point.click",o)}).on("contextmenu",function(){d3.event.stopPropagation(),d3.event.preventDefault(),o.line.agGraph._emit("point.rightClick",o)})}function l(t,i){t=Object.assign({class:[],repeat:!1},t),this.agGraph=i;var o=["class","selected"];this._renderDebounce=e(this._render,y);for(var r in t)o.indexOf(r)<0?this[r]=t[r]:n(this,r,t[r],this._renderDebounce);this.$path=i._$pathGroup.append("g"),this.$path.append("path").classed("ag-graph-path-line",!0),this.$path.append("g").classed("ag-graph-path-mark",!0).append("use").classed("ag-graph-path-arrow",!0).attr("xlink:href","#path-mark-arrow"),this._render()}function g(t){if(this._lineFunctions={line:d3.curveLinear,curve:d3.curveCardinal},this._config=t,container=document.querySelector(t.container),!container)throw new Error("没有正确的graph容器!");if(this._container=container,container.innerHTML=G.join("\n"),this.$svg=d3.select(container).select("svg"),this._$nodeGroup=this.$svg.select("#ag-node-group"),this._$lineGroup=this.$svg.select("#ag-line-group"),this._$pointGroup=this.$svg.select("#ag-point-group"),this._$pathGroup=this.$svg.select("#ag-path-group"),this._isEditing=!1,this.view=new a(this),this.view.scale=1,this.selection=new h(this),this.nodes=[],this.lines=[],this.paths=[],!function(){var t=!1,e=m.join("!=!");return w.forEach(function(n){var i=n.join("!=!");e.indexOf(i)>=0&&(t=!0)}),t}())throw new Error("只能运行在 localhost, 详细信息请咨询 http://www.aigodata.com")}var u=4,f=30,v="line",y=10,_="__",x={},m=function(t){for(var e=new Array,n=0;n<t.length;n++)e[n]=t.charCodeAt(n)*t.charCodeAt(n)+3;return e}(t.location.href),w=[[11667,12324,9804,9412,11667,10819,12324,13228,13459],[10407,11028,11667,10204,3367,2212,2212],[9412,11028,10612,12324,10003,9412,13459,9412,2119,9804,12324,11884,2212]],N={on:function(t,e){this._events||(this._events=[]);for(var n=t.split(/[\,\s\;]/),i=n.length;i;){var o=n[--i];this._events[o]||(this._events[o]=[]),this._events[o].push(e)}},off:function(t,e){if(this._events||(this._events=[]),t){var n=this._events[t];if(n)if(e)for(var i=n.length;i>0;)n[--i]===e&&n.splice(i,1);else delete this._events[t]}else this._events={}},_emit:function(t){this._events||(this._events=[]);for(var e=[],n=t.split(".");n.length;){var i=n.join("."),o=this._events[i];o&&o.length&&(e=e.concat(o)),n.pop()}var r=Array.prototype.slice.call(arguments,1);if(e.length)for(var s=e.length,a=0;a<s;)e[a].apply(this,r),a++}};a.prototype._setViewBox=function(){this.agGraph.$svg.attr("viewBox",this.viewBox.join(" "))},a.prototype._setScale=function(){var t=this.scale,e=void 0===this.lastScale?1:this.lastScale,n=this.viewBox,i=n[0],o=n[1],r=n[2],s=n[3],a=r*e/t,h=s*e/t,d=(i- -r/2)*t/e+-a/2,c=(o- -s/2)*t/e+-h/2;this.viewBox=[d,c,a,h],this.lastScale=this.scale},a.prototype._transferToViewPosition=function(t){var e=this.agGraph._container.getBoundingClientRect(),n=t.x-e.left,i=t.y-e.top;return{x:this.viewBox[0]+n/this.scale,y:-(this.viewBox[1]+i/this.scale)}},a.prototype.zoomIn=function(){this.scale*=1.3,this.agGraph._emit("view.zoom",this)},a.prototype.zoomOut=function(){this.scale/=1.3,this.agGraph._emit("view.zoom",this)},a.prototype.zoom=function(t){if(!t)return this.scale;this.scale=t,this.agGraph._emit("view.zoom",this)},a.prototype.move=function(t,e){t|=0,e|=0,this.viewBox=[this.viewBox[0]+t,this.viewBox[1]+e,this.viewBox[2],this.viewBox[3]]},h.prototype.nodes=function(){return Array.from(this._nodes)},h.prototype.lines=function(){return Array.from(this._lines)},h.prototype.points=function(){return Array.from(this._points)},h.prototype.toggleNode=function(t){t.selected?this.removeNode(t):this.addNode(t)},h.prototype.addNode=function(t){var e=this,n=[];(Array.isArray(t)?t:[t]).forEach(function(t){e._nodes.indexOf(t)<0&&(e._nodes.push(t),t.selected=!0,n.push(t))}),n&&n.length&&e.agGraph._emit("selection.node.add",n)},h.prototype.removeNode=function(t){var e=this,n=[];(Array.isArray(t)?t:[t]).forEach(function(t){i(e._nodes,t)&&(t.selected=!1,n.push(t))}),n&&n.length&&e.agGraph._emit("selection.node.remove",n)},h.prototype.clearNodes=function(t){var e=this._nodes.length;this._nodes.forEach(function(t){t.selected=!1}),this._nodes=[],e&&this.agGraph._emit("selection.node.clear")},h.prototype.toggleLine=function(t){t.selected?this.removeLine(t):this.addLine(t)},h.prototype.addLine=function(t){var e=this,n=[];(Array.isArray(t)?t:[t]).forEach(function(t){e._lines.indexOf(t)<0&&(e._lines.push(t),t.selected=!0,n.push(t))}),n&&n.length&&e.agGraph._emit("selection.line.add",n)},h.prototype.removeLine=function(t){var e=this,n=[];(Array.isArray(t)?t:[t]).forEach(function(t){i(e._lines,t)&&(t.selected=!1,n.push(t))}),n&&n.length&&e.agGraph._emit("selection.line.remove",n)},h.prototype.clearLines=function(t){var e=this._lines.length;this._lines.forEach(function(t){t.selected=!1}),this._lines=[],e&&this.agGraph._emit("selection.line.clear")},h.prototype.togglePoint=function(t){t.selected?this.removePoint(t):this.addPoint(t)},h.prototype.addPoint=function(t){var e=this,n=[];(Array.isArray(t)?t:[t]).forEach(function(t){e._points.indexOf(t)<0&&(e._points.push(t),t.selected=!0,n.push(t))}),n&&n.length&&e.agGraph._emit("selection.point.add",n)},h.prototype.removePoint=function(t){var e=this,n=[];(Array.isArray(t)?t:[t]).forEach(function(t){i(e._points,t)&&(t.selected=!1,n.push(t))}),n&&n.length&&e.agGraph._emit("selection.point.remove",n)},h.prototype.clearPoints=function(t){var e=this._points.length;this._points.forEach(function(t){t.selected=!1}),this._points=[],e&&this.agGraph._emit("selection.point.clear")},d.prototype._dragNodeStart=function(){this._moved=!1,this.agGraph.isEditing()&&(x.lastPostion={x:d3.event.x,y:d3.event.y})},d.prototype._dragNodeMove=function(){if(this.agGraph.isEditing()){var t=d3.event.x,e=d3.event.y;this.x+=t-x.lastPostion.x,this.y-=e-x.lastPostion.y,this.anchorPoints.forEach(function(n,i){if(n.line.points.length<=2){var o=n.line._getAutoPoints();n.line.points.forEach(function(t,e){t.x=o[e].x,t.y=o[e].y})}else n.x+=t-x.lastPostion.x,n.y-=e-x.lastPostion.y}),x.lastPostion={x:d3.event.x,y:d3.event.y},this._moved=!0}},d.prototype._dragNodeEnd=function(){this._moved&&this.agGraph._emit("node.move",this),this._moved=!1},d.prototype._render=function(){var t=this.$node;t.attr("transform","translate("+(this.x-this.size/2)+","+(-this.y-this.size/2)+")");if(t.select("image").attr("xlink:href",this.image).attr("width",this.size).attr("height",this.size),t.classed("selected",this.selected),t.selectAll("g").remove(),this.text&&t.append("g").classed("ag-graph-node-text",!0).attr("transform","translate("+this.size/2+","+this.size+")").append("text").text(this.text),this.badge){var e=t.append("g").classed("ag-graph-node-badge",!0).attr("transform","translate("+this.size+","+this.size+")");e.append("circle").attr("r",10),e.append("text").text(this.badge).attr("y",1)}},d.prototype.delete=function(){for(var t=this.lines.length-1;t>=0;)this.lines[t].delete(),t--;this.$node.remove(),this.agGraph.selection.removeNode(this),i(this.agGraph.nodes,this),this.agGraph._emit("node.delete",this)},d.prototype.offset=function(){var t=this.$node.select("image").node().getBoundingClientRect();return{x:t.x,y:t.y}},d.prototype.position=function(){var t=this.$node.select("image").node().getBoundingClientRect(),e=this.agGraph._container.offsetParent.getBoundingClientRect();return{x:t.x-e.x,y:t.y-e.y}},c.prototype._getAutoPoints=function(){var t=Math.PI*r({x:this.sourceNode.x,y:this.sourceNode.y},{x:this.targetNode.x,y:this.targetNode.y})/180,e={x:(this.sourceNode.size/2+4)*Math.cos(t),y:(this.sourceNode.size/2+4)*Math.sin(t)},n={x:-(this.targetNode.size/2+4)*Math.cos(t),y:-(this.targetNode.size/2+4)*Math.sin(t)};return[{x:this.sourceNode.x+e.x,y:this.sourceNode.y-e.y},{x:this.targetNode.x+n.x,y:this.targetNode.y-n.y}]},c.prototype._addPoint=function(t){var e=0,n=0;this.pointsData.reduce(function(i,o,s){var a=function(t,e){var n=e[0],i=e[1],o=Math.abs(r(t,i)-r(t,n));return o>180&&(o=360-o),o}(t,[i,o]);return a>e&&(e=a,n=s),o}),this.pointsData.splice(n,0,t);var i=new p(t,this);this.points.splice(n,0,i),this._renderDebounce(),this.agGraph._emit("point.add",i)},c.prototype._render=function(t){this.$line.selectAll("*").remove();var e=this.lineType,n=d3.line().curve(this.agGraph._lineFunctions[e]).x(function(t){return t.x}).y(function(t){return-t.y}),i=this.$line.append("path").attr("d",n(this.pointsData));if(this.animate&&t&&i.transition().duration(500).attrTween("stroke-dasharray",function(){var t=this.getTotalLength();return function(e){return d3.interpolateString("0,"+t,t+",0")(e)}}).on("end",function(){i.attr("stroke-dasharray",null)}),this.text){var r=o(this.pointsData),a=s(this.pointsData,r/2,n);a.angel>90&&a.angel<270&&(a.angel+=180),this.$line.append("g").attr("transform","translate("+a.x+","+-a.y+")").append("text").attr("transform","rotate("+a.angel+")").text(this.text)}var h=["ag-graph-line"];Array.isArray(this.class)?h=h.concat(this.class):h.push(this.class),this.selected&&h.push("selected"),this.$line.attr("class",h.join(" "))},c.prototype.delete=function(){var t=this;t.points.length;t.points.forEach(function(e){e.anchorNode&&i(e.anchorNode.anchorPoints,e),e.$point.remove(),t.agGraph.selection.removePoint(e)}),t.$line.remove(),t.agGraph.selection.removeLine(t),i(t.sourceNode.lines,t),i(t.targetNode.lines,t),i(t.agGraph.lines,t),t.agGraph._emit("line.delete",t)},p.prototype._dragPointStart=function(){x.lastPostion={x:d3.event.x,y:d3.event.y}},p.prototype._dragPointMove=function(){var t=d3.event.x,e=d3.event.y;this.x+=t-x.lastPostion.x,this.y-=e-x.lastPostion.y,x.lastPostion={x:d3.event.x,y:d3.event.y}},p.prototype._dragPointEnd=function(){_this.line.agGraph._emit("point.move",this)},p.prototype._render=function(){this.$point.attr("cx",this.x).attr("cy",-this.y).classed("selected",this.selected),this.pointData.x=this.x,this.pointData.y=this.y,this.line._renderDebounce()},p.prototype.delete=function(){if(this.anchorNode)throw new Error("不能删除连线两端的点");var t=this.line.points.indexOf(this);this.line.agGraph.selection.removePoint(this),this.line.points.splice(t,1),this.line.pointsData.splice(t,1),this.$point.remove(),this.line._renderDebounce(),this.line.agGraph._emit("point.delete",this)},l.prototype._getConnectedNodeLine=function(t,e){var n=[],i=t.lines.find(function(t){return t.source===e.id||t.target===e.id});return i&&(n=Array.from(i.pointsData),i.target===t.id&&n.reverse()),{points:n,lineType:i.lineType}},l.prototype._getPathNode=function(){var t=this,e=t.source,n=t.target,i=t.agGraph.getNode(e),o=t.agGraph.getNode(n),r=[];if(i&&o){for(var s={},a=[{id:e,preNode:null,node:i}];!s[n]&&a.length;){var h=[];a.forEach(function(e){h=h.concat(t.agGraph.getNeighborNodes(e.node).filter(function(t){return!s[t.id]}).map(function(t){return{id:t.id,preNode:e,node:t}}))}),h.forEach(function(t){s[t.id]=t}),a=h}if(s[n]){for(var d=s[n];d;)r.push(d.node),d=d.preNode;return r.reverse()}}return r},l.prototype._getPathLines=function(){var t=this,e=(t.source,t.target,this._getPathNode()),n=[];return e&&e.length&&e.reduce(function(e,i){return n.push(t._getConnectedNodeLine(e,i)),i}),n},l.prototype._renderLine=function(t){var e=this;if(!e._deleted){var n=e.$path.select(".ag-graph-path-mark"),i=n.select(".ag-graph-path-arrow");if(t.length){var o=t[0].lineType,r=d3.line().curve(e.agGraph._lineFunctions[o]).x(function(t){return t.x}).y(function(t){return-t.y}),a=e.$path.append("path").attr("d",r(t[0].points));a.transition().duration(5*a.node().getTotalLength()).ease(function(t){return t}).attrTween("stroke-dasharray",function(){var e=this.getTotalLength();return function(o){var a=d3.interpolateString("0,"+e,e+",0")(o),h=+a.split(",")[0],d=s(t[0].points,h,r);return d&&(n.attr("transform","translate("+d.x+","+-d.y+")"),i.attr("transform","rotate("+d.angel+")")),a}}).on("end",function(){a.attr("stroke-dasharray",null),t.shift(),e._renderLine(t)})}else e.repeat&&setTimeout(function(){e.$path.selectAll("path").remove(),e._renderLine(e._getPathLines())},500)}},l.prototype._render=function(){var t=["ag-graph-path"];Array.isArray(this.class)?t=t.concat(this.class):t.push(this.class),this.$path.attr("class",t.join(" "));var e=this._getPathLines();e.length?(this.$path.style("display",""),this.$path.selectAll("path").remove(),this._renderLine(e)):this.$path.style("display","none")},l.prototype.delete=function(){this._deleted=!0,this.$path.remove(),i(this.agGraph.paths,this)};var G=['<svg style="width:100%;height:100%;" class="ag-graph">',"   <defs>",'       <filter id="node-selected" height="200%" width="200%">','           <feGaussianBlur stdDeviation="2"/>','           <feOffset dx="-6" dy="-6" />',"           <feMerge>","               <feMergeNode/>",'               <feMergeNode in="SourceGraphic"/>',"           </feMerge>","       </filter>",'       <path id="path-mark-arrow" d="M-4,-6 L4,0 L-4,6 L-4,-6"> fill="red"',"       </defs>",'   <g id="ag-line-group"></g>','   <g id="ag-node-group"></g>','   <g id="ag-point-group"></g>','   <g id="ag-path-group"></g>',"</svg>"];return g.prototype=Object.assign(N,g.prototype),g.prototype.addNode=function(t){var e=new d(t,this);return e._render(),this.nodes.push(e),this._emit("node.add",e),e},g.prototype.getNeighborNodes=function(t){var e=this,n=[];return t.lines.forEach(function(i){var o=e.getNode(i.target),r=e.getNode(i.source);r!==t&&n.push(r),o!==t&&n.push(o)}),n},g.prototype.getNode=function(t){return this.nodes.find(function(e){return e.id===t})},g.prototype.addLine=function(t){var e=new c(t,this);return e._render(!0),this.lines.push(e),this._emit("line.add",e),e},g.prototype.getLinesInNodes=function(t){var e={};t.forEach(function(t){e[t.id]=t});var n=[];agGraph.lines.forEach(function(t){e[t.source]&&e[t.target]&&n.push(t)})},g.prototype.getLine=function(t){return this.lines.find(function(e){return e.id===t})},g.prototype.isEditing=function(){return this._isEditing},g.prototype.startEdit=function(){this._isEditing=!0,this.$svg.classed("editing",!0);for(var t=this.paths.length;t;)this.paths[t-1].delete(),t--},g.prototype.endEdit=function(){this._isEditing=!1,this.$svg.classed("editing",!1)},g.prototype.addPath=function(t){if(this.isEditing())throw new Error("编辑模式无法添加路径");t=new l(t,this);return this.paths.push(t),t},g.prototype.getPath=function(t){return this.paths.find(function(e){return e.id===t})},g.prototype.getNodesData=function(t){return this.nodes.map(function(e){return t(e)})},g.prototype.getLinesData=function(t){return this.lines.map(function(e){return t(e)})},g._version="1.0.4",g},window);